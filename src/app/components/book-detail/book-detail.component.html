<div class="container">
  <button class="back-button" (click)="goBack()">
    ‚Üê Volver
  </button>

  @if (loading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Cargando detalles...</p>
    </div>
  }

  @if (!loading() && book()) {
    <div class="book-detail">
      <div class="book-cover-section">
        <div class="book-cover-wrapper">
          <img
            [src]="getBookImage()"
            [alt]="book()!.volumeInfo.title"
            class="book-cover"
          />
        </div>
      </div>

      <div class="book-info-section">
        <h1 class="book-title">{{ book()!.volumeInfo.title }}</h1>
        
        <div class="book-meta">
          <div class="meta-item">
            <span class="meta-label">üë§ Autor:</span>
            <span class="meta-value">{{ getAuthors() }}</span>
          </div>

          @if (book()!.volumeInfo.publisher) {
            <div class="meta-item">
              <span class="meta-label">üìö Editorial:</span>
              <span class="meta-value">{{ book()!.volumeInfo.publisher }}</span>
            </div>
          }

          @if (book()!.volumeInfo.publishedDate) {
            <div class="meta-item">
              <span class="meta-label">üìÖ Fecha de publicaci√≥n:</span>
              <span class="meta-value">{{ book()!.volumeInfo.publishedDate }}</span>
            </div>
          }

          @if (book()!.volumeInfo.pageCount) {
            <div class="meta-item">
              <span class="meta-label">üìÑ P√°ginas:</span>
              <span class="meta-value">{{ book()!.volumeInfo.pageCount }}</span>
            </div>
          }

          @if (book()!.volumeInfo.language) {
            <div class="meta-item">
              <span class="meta-label">üåê Idioma:</span>
              <span class="meta-value">{{ book()!.volumeInfo.language }}</span>
            </div>
          }

          <div class="meta-item">
            <span class="meta-label">üè∑Ô∏è Categor√≠as:</span>
            <span class="meta-value">{{ getCategories() }}</span>
          </div>

          @if (book()!.volumeInfo.averageRating) {
            <div class="meta-item">
              <span class="meta-label">‚≠ê Calificaci√≥n:</span>
              <span class="meta-value">{{ book()!.volumeInfo.averageRating }} / 5 ({{ book()!.volumeInfo.ratingsCount || 0 }} valoraciones)</span>
            </div>
          }
        </div>

        @if (book()!.volumeInfo.description) {
          <div class="description-section">
            <h2 class="section-title">Descripci√≥n</h2>
            <p class="description" [innerHTML]="book()!.volumeInfo.description"></p>
          </div>
        }

        @if (book()!.volumeInfo.previewLink) {
          <button class="preview-button" (click)="openPreview()">
            üëÅÔ∏è Ver vista previa
          </button>
        }
      </div>
    </div>
  }

  @if (!loading() && !book()) {
    <div class="no-book">
      <p>No se pudo cargar el libro</p>
    </div>
  }
</div>